<ylt:MetroDialog x:Class="YuLinTu.Component.VectorDataDecoding.Controls.LogDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ylt="http://schemas.yulintu.com/wpf/xaml/framework"
                 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                 xmlns:local="clr-namespace:YuLinTu.Component.VectorDataDecoding.Controls"
                 Icon="pack://application:,,,/YuLinTu.Resources;component/Images/16/DataFormSource.png"
                 Header="操作日志"
                 Width="1200"
                 Height="680">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding CommandLoaded}"></i:InvokeCommandAction>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    
    <Grid Background="{DynamicResource Metro_Window_Style_Background_Content}"
          ClipToBounds="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
           
        </Grid.RowDefinitions>
        <!--<Grid Grid.Row="1"
              Visibility="{Binding IsBusy, RelativeSource={RelativeSource AncestorType=ylt:MetroDialog}, Converter={StaticResource BoolToVisibilityConverter}}">
            <ylt:BusyIcon HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Visibility="{Binding Path=IsBusy, RelativeSource={RelativeSource AncestorType=ylt:MetroDialog}, Converter={StaticResource BoolToVisibilityConverter}}"
                          RenderOptions.BitmapScalingMode="NearestNeighbor"
                          RenderTransformOrigin=".5 .5">
                <ylt:BusyIcon.RenderTransform>
                    <ScaleTransform ScaleX=".7"
                                    ScaleY=".7"></ScaleTransform>
                </ylt:BusyIcon.RenderTransform>
            </ylt:BusyIcon>
        </Grid>-->

        <Grid Grid.Row="1"
              Visibility="{Binding IsBusy, RelativeSource={RelativeSource AncestorType=ylt:MetroDialog}, Converter={StaticResource BoolToVisibilityConverter}}">
            <ylt:BusyIcon Style="{StaticResource Dialog_BusyIconStyle}"
                          Visibility="{Binding Path=IsBusy, RelativeSource={RelativeSource AncestorType=ylt:MetroDialog}, Converter={StaticResource BoolToVisibilityConverter}}">
            </ylt:BusyIcon>
        </Grid>
        <Grid Grid.Row="1"
              Margin="0,0,10,0"
              Visibility="{Binding IsBusy, RelativeSource={RelativeSource AncestorType=ylt:MetroDialog}, Converter={StaticResource NotBoolToVisibilityConverter}}">

            <ylt:MetroDataGrid 
                               
                
                  Name="dg"
                            SelectionMode="Extended"
                            HeadersVisibility="Column"
                            AutoGenerateColumns="False"
                            BorderThickness="1,0,0,0"
                            CanUserAddRows="False"
                            SelectItemWhenRightButtonClick="True"
                             ItemsSource="{Binding Items}"
                           SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                         
                            ylt:DataGridAttacher.HeaderBackgroundDefault="Transparent"
                            IsReadOnly="True"
                >
                <ylt:MetroDataGrid.Columns>
                    <DataGridTemplateColumn Header="  ...">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid Margin="10,0,10,0">
                                    <Image Width="16"
                                       Height="16"
                                       Source="{Binding Grade, Converter={StaticResource MessageGradeToImageConverter}}"
                                       Stretch="None"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"></Image>
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>
                            <TextBlock Text="时间"
                                   ToolTip="操作时间"></TextBlock>
                        </DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding create_time}"
                                       Margin="6"
                                       ToolTip="{Binding create_time}"></TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="操作人"
                                           
                                            SortMemberPath="user_name">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>

                                <TextBlock  Margin="6"
                                    Text="{Binding user_name}"></TextBlock>
                           
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="设备标识"
                                         
                                            SortMemberPath="user_id"
                                            ylt:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Left">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock 
                                            Margin="6"
                                           Text="{Binding user_id}"></TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    
                    <DataGridTemplateColumn Header="操作类型"
                                            
                                            
                                            ylt:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Left">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock  
                                             Margin="6"
                                            Text="{Binding sub_type}"></TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Width="*">
                        <DataGridTemplateColumn.Header>
                            <TextBlock Text="描述"
                                   ToolTip="详情描述"></TextBlock>
                        </DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding description}"
                                       Margin="6"
                                       ToolTip="{Binding description}"
                                       TextWrapping="Wrap"></TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                   
                    </ylt:MetroDataGrid.Columns>
            </ylt:MetroDataGrid>
        </Grid>
      
    </Grid>
</ylt:MetroDialog>
