<UserControl x:Class="YuLinTu.Library.Controls.InvestigationLandPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:YuLinTu.Library.Controls"
             xmlns:metro="clr-namespace:YuLinTu.Windows.Wpf.Metro;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:cmps="clr-namespace:YuLinTu.Windows.Wpf.Metro.Components;assembly=YuLinTu.Windows.Wpf.Metro">
    <UserControl.Resources>
        <local:ContractAccountImgConvert x:Key="ImgConvert"/>     
    </UserControl.Resources>
    <Grid>
        <cmps:MetroExpander BorderThickness="0,1,0,0" IsExpanded="True" HeaderPadding="0" HeaderBackgroundDefault="{DynamicResource Metro_Window_Style_Background}">
            <cmps:MetroExpander.Header>
                <DockPanel LastChildFill="True">
                    <TextBlock Text="承包地"
                               DockPanel.Dock="Left" VerticalAlignment="Center"/>
                    <Border BorderThickness="0" BorderBrush="LightGray">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <metro:MetroButton Margin="0,3,3,3" Height="26" Width="30" VerticalAlignment="Center" Tag="{Binding ID}" Name="landAddBtn" Click="landAddBtn_Click" ToolTip="添加承包地块">
                                <cmps:ImageTextItem  Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/plus.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                            <metro:MetroButton Margin="0,3,3,3" Height="26" Width="30"  VerticalAlignment="Center" Tag="{Binding ID}"  Name="landUpdateBtn" Click="landUpdateBtn_Click" ToolTip="编辑承包地块">
                                <cmps:ImageTextItem Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/application--pencil.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                            <metro:MetroButton Margin="0,3,8,3" Height="26" Width="30"  VerticalAlignment="Center" Tag="{Binding ID}" Name="landDelBtn" Click="landDelBtn_Click" ToolTip="删除承包地块">
                                <cmps:ImageTextItem  Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/cross-script.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                        </StackPanel>
                    </Border>
                </DockPanel>
            </cmps:MetroExpander.Header>
            <Grid>
                <cmps:MetroListBox Name="landListBox"  
                                   ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                   ScrollViewer.VerticalScrollBarVisibility="Auto"
                                   ItemMargin="0,0,0,0"  
                                   GridLineThickness="0,0,0,1" 
                                   GridLineVisibility="Visible"
                                   Grid.Row="0"
                                   SelectionChanged="landListBox_SelectionChanged"
                                   MouseDoubleClick="landListBox_MouseDoubleClick"
                                   ContextMenuOpening="landListBox_ContextMenuOpening">
                    <cmps:MetroListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid  cmps:DragDropAttacher.AllowDrag="True" Background="Transparent">
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="95"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <DockPanel Grid.Row="0" Grid.Column="0">
                                    <cmps:ImageTextItem Image="{Binding ImgUI,Converter={StaticResource ImgConvert}}"
                                                        DockPanel.Dock="Left"
                                                        Text="{Binding NameUI}"
                                                        HorizontalAlignment="Left"
                                                        Margin="8,2,0,2"/>
                                </DockPanel>
                                <DockPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right">
                                    <TextBlock IsEnabled="False"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Margin="5,2,2,2"
                                               DockPanel.Dock="Left"
                                               Text="{Binding TabelAreaUI}"/>
                                </DockPanel>
                                <DockPanel Grid.Row="1" Grid.Column="0" LastChildFill="True">
                                    <TextBlock IsEnabled="False"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Margin="8,2,0,2"
                                               Text="{Binding SurveyNumberUI}"/>
                                </DockPanel>
                                <DockPanel Grid.Row="1" Grid.Column="1" LastChildFill="True" HorizontalAlignment="Right">
                                    <TextBlock IsEnabled="False"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Left"
                                               Margin="5,2,2,2"
                                               Text="{Binding ActualAreaUI}"/>
                                </DockPanel>
                            </Grid>
                        </DataTemplate>
                    </cmps:MetroListBox.ItemTemplate>
                    <cmps:MetroListBox.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="添加地块" Name="btnLandAdd" Click="btnLandAdd_Click">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Resources;component/Images/16/plus.png" 
                                           RenderOptions.BitmapScalingMode="NearestNeighbor" 
                                           SnapsToDevicePixels="True" 
                                           Stretch="Uniform" 
                                           Height="16"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="编辑地块" Name="btnLandEdit" Click="btnLandEdit_Click">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Resources;component/Images/16/application--pencil.png" 
                                           RenderOptions.BitmapScalingMode="NearestNeighbor" 
                                           SnapsToDevicePixels="True" 
                                           Stretch="Uniform" 
                                           Height="16"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="删除地块" Name="btnLandDel" Click="btnLandDel_Click">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Resources;component/Images/16/cross-script.png" 
                                           RenderOptions.BitmapScalingMode="NearestNeighbor" 
                                           SnapsToDevicePixels="True" 
                                           Stretch="Uniform" 
                                           Height="16"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="定位地块" Name="btnLandZoomTo" Click="btnLandZoomTo_Click">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/查找数据_16.png" 
                                           RenderOptions.BitmapScalingMode="NearestNeighbor" 
                                           SnapsToDevicePixels="True" 
                                           Stretch="Uniform" 
                                           Height="16"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </cmps:MetroListBox.ContextMenu>
                </cmps:MetroListBox>
            </Grid>
        </cmps:MetroExpander>
    </Grid>
</UserControl>
