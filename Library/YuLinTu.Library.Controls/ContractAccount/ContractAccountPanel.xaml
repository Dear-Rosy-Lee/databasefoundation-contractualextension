<UserControl x:Class="YuLinTu.Library.Controls.ContractAccountPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:metro="clr-namespace:YuLinTu.Windows.Wpf.Metro;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:cmps="clr-namespace:YuLinTu.Windows.Wpf.Metro.Components;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:local="clr-namespace:YuLinTu.Library.Controls">

    <UserControl.Resources>
        <local:ContractAccountImgConvert x:Key="ImgConvert" />
        <local:GenderValueConvert x:Key="GenderConvert" />
        <local:BoolConvert x:Key="boolConvert"/>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border Grid.Row="0"
                SnapsToDevicePixels="True"
                BorderThickness="0,0,0,1"
                Height="33"
                Padding="8,0"
                BorderBrush="{DynamicResource Metro_Window_Style_BorderBrush_Default}"
                Background="{DynamicResource Metro_Window_Style_Background_Lighter}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <cmps:ImageTextItem Grid.Column="0"
                                    Name="ca_zoneFullName"
                                    ImageTextSpacing="8"
                                    Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/管理列表16.png"></cmps:ImageTextItem>
                <StackPanel Grid.Column="1"
                            Name="ca_LandInfo"
                            Orientation="Horizontal"
                            VerticalAlignment="Stretch">
                    <cmps:Separator Orientation="Vertical"></cmps:Separator>

                    <CheckBox Content="是否批量"
                              VerticalAlignment="Center"
                              Name="caIsbatch"
                              Click="caIsbatch_Click"
                              IsChecked="{Binding Path=IsBatch}"
                              Margin="8,0,8,0" />
                    <cmps:Separator Orientation="Vertical"></cmps:Separator>

                    <cmps:ImageTextItem  Name="ca_family"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/户主16.png"
                                         ToolTip="总户数"
                                         MinWidth="45"
                                         Margin="12,0,0,0"
                                         VerticalAlignment="Center"
                                         Text="{Binding AccountSummary.FamilyCount }"/>

                    <cmps:ImageTextItem  Name="ca_landcount"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/承包地16.png"
                                         ToolTip="总地块数"
                                         MinWidth="45"
                                         VerticalAlignment="Center"
                                         Text="{Binding AccountSummary.LandCount}"
                                         Margin="8,0,0,0" />

                    <cmps:ImageTextItem  Name="ca_tableArea"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/详细信息16.png"
                                         ToolTip="总二轮合同面积"
                                         MinWidth="65"
                                         VerticalAlignment="Center"
                                         Text="{Binding AccountSummary.TableAreaCount }"
                                         Margin="8,0,0,0" />

                    <cmps:ImageTextItem  Name="ca_actualArea"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miActualArea.png"
                                         ToolTip="总实测面积"
                                         MinWidth="65"
                                         VerticalAlignment="Center"
                                         Text="{Binding AccountSummary.ActualAreaCount }"
                                         Margin="8,0,0,0" />

                    <cmps:ImageTextItem  Name="ca_awareArea"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/表16_4.png"
                                         ToolTip="总确权面积"
                                         MinWidth="65"
                                         VerticalAlignment="Center"
                                         Text="{Binding AccountSummary.ArwareAreaCount}"
                                         Margin="8,0,12,0" />

                    <cmps:Separator Orientation="Vertical"></cmps:Separator>

                    <metro:MetroButton Name="btn_refresh"
                                       Width="30"
                                       Click="btn_refresh_Click_1"
                                       VerticalAlignment="Stretch"
                                       ToolTip="刷新">
                        <cmps:ImageTextItem Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/Refresh.png" />
                    </metro:MetroButton>

                    <cmps:Separator Orientation="Vertical"></cmps:Separator>

                    <cmps:MetroTextBox Name="txtWhere"
                                       Width="130"
                                       Height="25"
                                       Watermask="快速过滤"
                                       Margin="4,0,10,0"
                                       TextChanged="txtWhere_TextChanged_1" />

                    <CheckBox Content="全匹配"
                              VerticalAlignment="Center"
                              Name="ca_ComplateInfo"
                              Click="ca_ComplateInfo_Click_1" />
                </StackPanel>
            </Grid>
        </Border>

        <cmps:MetroTreeGrid Name="view"
                            ItemAutoExpand="True"
                            BorderThickness="0"
                            Grid.Row="1"
                            cmps:DataGridAttacher.ContentBorderThickness="0,1,0,0"
                            cmps:DataGridAttacher.ColumnHeaderThumbWidth="1"
                            ExpandItemWhenLeftMouseDoubleClick="False"
                            MouseDoubleClick="view_MouseDoubleClick"
                            PreviewMouseDown="view_PreviewMouseDown"
                            SelectionChanged="view_SelectionChanged"
                            MouseRightButtonDown="view_MouseRightButtonDown"
                            AutoGenerateColumns="False"
                            VirtualizingStackPanel.IsVirtualizing="True"
                            VirtualizingStackPanel.VirtualizationMode="Recycling"
                            x:FieldModifier="public">
            <cmps:MetroTreeGrid.Columns>
                <DataGridTemplateColumn Header="地块名称"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="Name"
                                        Width="250">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <cmps:MetroTreeGridRowToggleButton></cmps:MetroTreeGridRowToggleButton>
                                <StackPanel HorizontalAlignment="Left"
                                            Orientation="Horizontal">
                                    <cmps:ImageTextItem Image="{Binding Object.Img,Converter={StaticResource ImgConvert}}"
                                                        HorizontalAlignment="Left"
                                                        Margin="2,0,0,0"
                                                        x:Name="tbName"
                                                        Text="{Binding Object.Name, Mode=TwoWay}"
                                                        VerticalAlignment="Center" />
                                </StackPanel>

                                <!--<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
                                        <Image Source="{Binding Img,Converter={StaticResource ImgConvert}}" Height="15" Width="15" HorizontalAlignment="Left" Margin="0,0,5,0"/>
                                        <TextBlock x:Name="tbName" Text="{Binding Name, Mode=TwoWay}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                                    </StackPanel>-->

                            </DockPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Object.Tag.Status}"
                                             Value="1">
                                    <Setter TargetName="tbName"
                                            Property="Foreground"
                                            Value="#BF2F0B" />
                                    <Setter TargetName="tbName"
                                            Property="FontWeight"
                                            Value="Bold" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Object.Tag.Status}"
                                             Value="2">
                                    <Setter TargetName="tbName"
                                            Property="Foreground"
                                            Value="Green" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="地块编码"
                                        Width="170"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="LandNumber">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.LandNumber}"
                                           HorizontalAlignment="Center"      VerticalAlignment="Center"  />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="二轮合同面积(亩)"
                                        Width="120"
                                        SortMemberPath="TableAreaUI"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        x:Name="lb_tableArea">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.TableAreaUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="实测面积(亩)"
                                        Width="98"
                                        SortMemberPath="ActualAreaUI"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        x:Name="lb_actualArea">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.ActualAreaUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="确权面积(亩)"
                                        Width="98"
                                        SortMemberPath="AwareAreaUI"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        x:Name="lb_awareArea">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.AwareAreaUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="土地利用类型"
                                        Width="95"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="LandName"
                                        x:Name="ca_landName">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.LandName}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="地块类别"
                                        Width="95"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="LandCategoryUI"
                                        x:Name="ca_landCategory">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.LandCategoryUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="基本农田"
                                        Width="70"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="IsFarmerLandUI"
                                        x:Name="gcPersonCount">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.IsFarmerLandUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="地力等级"
                                        Width="80"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="LandLevelUI"
                                        x:Name="ca_landLevel">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.LandLevelUI}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>


                <DataGridTemplateColumn Header="是否确股地块"
                                        Width="100"
                                        Visibility="Collapsed"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="LandLevelUI"
                                        x:Name="colum_IsStock">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.IsStockLand,Converter={StaticResource boolConvert}}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="备注"
                                        cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                                        SortMemberPath="Comment"
                                        Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.Comment}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </cmps:MetroTreeGrid.Columns>

            <cmps:MetroTreeGrid.ContextMenu>
                <ContextMenu FontSize="13">

                    <MenuItem Header="添加"
                              Name="miAdd"
                              Click="miAdd_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/承包地16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="编辑"
                              Name="miEdit"
                              Click="miEdit_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/字段16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="删除"
                              Name="miDel"
                              Click="miDel_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/错误16_2.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator></Separator>

                    <!--<MenuItem Header="地块示意图"
                              x:Name="miDouble"
                              Visibility="Visible"
                              Click="miDouble_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/人口管理16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>-->

                    <MenuItem Header="地块示意图"
                              Name="miSingle"
                              Visibility="Visible"
                              Click="miSingle_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/设置户主_16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="空间查看"
                              Name="miCheckSpace"
                              Visibility="Visible"
                              Click="miCheckSpace_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/GroupFind.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator></Separator>
                    <MenuItem Header="编码详情"
                              Name="miNumberDetail"
                              Visibility="Visible"
                              Click="miNumberDetail_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/户号详情.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="初始数据"
                              Name="miInitialData"
                              Visibility="Visible"
                              Click="miInitialData_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miInitial.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="检索数据"
                              Name="miSearchData">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miSearch.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                        <MenuItem Header="地块名称空值"
                                  Name="miSearchLandNameNull"
                                  Click="miSearchLandNameNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miLand.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="二轮合同面积空值"
                                  Name="miSearchTableAreaNull"
                                  Click="miSearchTableAreaNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miTableArea.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="实测面积空值"
                                  Name="miSearchActualAreaNull"
                                  Click="miSearchActualAreaNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miActualArea.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="确权面积空值"
                                  Name="miSearchAwareAreaNull"
                                  Click="miSearchAwareAreaNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miAwareArea.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="基本农田空值"
                                  Name="miSearchIsFarmerNull"
                                  Click="miSearchIsFarmerNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miFarmer.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="地力等级空值"
                                  Name="miSearchLandLevelNull"
                                  Click="miSearchLandLevelNull_Click">
                            <MenuItem.Icon>
                                <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miLandLevel.png"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                                       SnapsToDevicePixels="True"
                                       Stretch="Uniform"
                                       Height="16" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <Separator></Separator>
                    <MenuItem Header="清空"
                              Name="miClear"
                              Visibility="Visible"
                              Click="miClear_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/清空16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>

                </ContextMenu>
            </cmps:MetroTreeGrid.ContextMenu>

        </cmps:MetroTreeGrid>
    </Grid>
</UserControl>
