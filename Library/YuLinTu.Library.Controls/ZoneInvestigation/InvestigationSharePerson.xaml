<UserControl x:Class="YuLinTu.Library.Controls.InvestigationSharePerson"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:YuLinTu.Library.Controls"
             xmlns:metro="clr-namespace:YuLinTu.Windows.Wpf.Metro;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:cmps="clr-namespace:YuLinTu.Windows.Wpf.Metro.Components;assembly=YuLinTu.Windows.Wpf.Metro">
    <UserControl.Resources>
        <local:GenderToImageConverter x:Key="GenderToImageConverter" />
        <local:ICNToImageConverter x:Key="ICNToImageConverter"/>
    </UserControl.Resources>

    <Grid>
        <cmps:MetroExpander  BorderThickness="0,1,0,0" IsExpanded="True" HeaderPadding="0" HeaderBackgroundDefault="{DynamicResource Metro_Window_Style_Background}">
            <cmps:MetroExpander.Header>
                <DockPanel LastChildFill="True">
                    <TextBlock Text="共有人"
                               DockPanel.Dock="Left" VerticalAlignment="Center"/>
                    <Border BorderThickness="0" BorderBrush="LightGray">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <metro:MetroButton  Margin="3" Height="26" Width="30" VerticalAlignment="Center" Tag="{Binding ID}" Name="sharePersonAddBtn"
                                                Click="sharePersonAddBtn_Click" ToolTip="添加共有人">
                                <cmps:ImageTextItem  Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/添加书记16.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                            <metro:MetroButton  Margin="0,3,3,3 " Height="26" Width="30" VerticalAlignment="Center" Tag="{Binding ID}"  Name="sharePersonEditBtn"  
                                                Click="sharePersonEditBtn_Click" ToolTip="编辑共有人">
                                <cmps:ImageTextItem Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/application--pencil.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                            <metro:MetroButton  Margin="0,3,8,3 " Height="26" Width="30"  VerticalAlignment="Center" Tag="{Binding ID}" Name="sharePersonDelBtn" 
                                                Click="sharePersonDelBtn_Click" ToolTip="删除共有人">
                                <cmps:ImageTextItem  Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/cross-script.png">
                                </cmps:ImageTextItem>
                            </metro:MetroButton>
                        </StackPanel>
                    </Border>
                </DockPanel>
            </cmps:MetroExpander.Header>
            <Grid>
                <cmps:MetroListBox Name="MetroListBox"  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                               ItemMargin="0,0,0,0"   GridLineThickness="0,0,0,1" GridLineVisibility="Visible"
                               MouseDoubleClick="MetroListBox_MouseDoubleClick"
                               SelectionChanged="MetroListBox_SelectionChanged"
                               ContextMenuOpening="MetroListBox_ContextMenuOpening"                             
                               ItemsSource="{Binding Items}" >
                    <cmps:MetroListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid cmps:DragDropAttacher.AllowDrag="True" Background="Transparent">
                                <!--<cmps:DragDropAttacher.DragHandler>
                        <cmps:DragHandler></cmps:DragHandler>
                    </cmps:DragDropAttacher.DragHandler>-->
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition ></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <DockPanel Grid.Row="0" Grid.Column="0">
                                    <cmps:ImageTextItem Text="{Binding Path=Name}" DockPanel.Dock="Left"  HorizontalAlignment="Left" Margin="8,2,2,2"
                                            Image="{Binding ICN, Converter={StaticResource ICNToImageConverter}}"></cmps:ImageTextItem>
                                </DockPanel>
                                <DockPanel Grid.Row="0" Grid.Column="1">
                                    <TextBlock IsEnabled="False" DockPanel.Dock="Right"  Margin="8,2,2,2"
                                   HorizontalAlignment="Right"  
                                   VerticalAlignment="Center"
                                   Text="{Binding Path=Relationship }" ></TextBlock>
                                </DockPanel>
                                <DockPanel Grid.Row="1" Grid.ColumnSpan="2" LastChildFill="False">
                                    <TextBlock    Text="{Binding Path=ICN}" Margin="8,2,2,2"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Left"
                                           Foreground="{DynamicResource GlyphBrush}"></TextBlock>
                                </DockPanel>
                            </Grid>
                        </DataTemplate>
                    </cmps:MetroListBox.ItemTemplate>

                    <cmps:MetroListBox.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="新增共有人" Name="sharePersonAdd" Click="sharePersonAdd_Click_1">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/添加书记16.png" RenderOptions.BitmapScalingMode="NearestNeighbor" SnapsToDevicePixels="True" Stretch="None" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="编辑共有人" Name="sharePersonEdit" Click="sharePersonEdit_Click_1">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Resources;component/Images/16/application--pencil.png"  RenderOptions.BitmapScalingMode="NearestNeighbor" SnapsToDevicePixels="True" Stretch="None"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="删除共有人" Name="sharePersonDel" Click="sharePersonDel_Click_1">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/YuLinTu.Resources;component/Images/16/cross-script.png" RenderOptions.BitmapScalingMode="NearestNeighbor" SnapsToDevicePixels="True" Stretch="None"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </cmps:MetroListBox.ContextMenu>

                </cmps:MetroListBox>
            </Grid>
        </cmps:MetroExpander>
    </Grid>


</UserControl>