<UserControl x:Class="YuLinTu.Library.Controls.ContractRegeditBookPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:metro="clr-namespace:YuLinTu.Windows.Wpf.Metro;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:cmps="clr-namespace:YuLinTu.Windows.Wpf.Metro.Components;assembly=YuLinTu.Windows.Wpf.Metro"
             xmlns:local="clr-namespace:YuLinTu.Library.Controls">
    <UserControl.Resources>
        <local:ContractRegeditBookValueConvert x:Key="ImgConvert" />
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border Grid.Row="0"
                SnapsToDevicePixels="True"
                BorderThickness="0,0,0,1"
                Height="33"
                Padding="8,0"
                BorderBrush="{DynamicResource Metro_Window_Style_BorderBrush_Default}"
                Background="{DynamicResource Metro_Window_Style_Background_Lighter}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <cmps:ImageTextItem Grid.Column="0"
                                    Name="lbzone"
                                    ImageTextSpacing="8"
                                    Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/管理列表16.png"></cmps:ImageTextItem>
                <StackPanel Grid.Column="1"
                            Name="sp_FamilyInfo"
                            Orientation="Horizontal"
                            VerticalAlignment="Stretch">
                    <cmps:Separator Orientation="Vertical"></cmps:Separator>
                    <CheckBox Content="是否批量"
                              VerticalAlignment="Center"
                              Name="cbIsbatch"
                              Click="cbIsbatch_Click"
                              Margin="8,0,8,0" />
                    <cmps:Separator Orientation="Vertical"
                                    Visibility="{Binding ElementName=cbIsbatch,Path=Visibility}"></cmps:Separator>
                    <cmps:ImageTextItem  Name="lb_WarrantCount"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/证书16.png"
                                         ToolTip="权证总数"
                                         MinWidth="75"
                                         Margin="12,0,0,0"
                                         VerticalAlignment="Center"
                                         Text="{Binding Summary.WarrantCount}" />
                    <cmps:ImageTextItem  Name="ca_ActualArea"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/详细信息16.png"
                                         ToolTip="实测总面积(亩)"
                                         MinWidth="65"
                                         VerticalAlignment="Center"
                                         Text="{Binding Summary.ActualAreaCount}"
                                         Margin="8,0,0,0" />

                    <cmps:ImageTextItem  Name="ca_AwareArea"
                                         Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/展开折叠16.png"
                                         ToolTip="确权总面积(亩)"
                                         MinWidth="65"
                                         VerticalAlignment="Center"
                                         Text="{Binding Summary.ArwareAreaCount}"
                                         Margin="8,0,12,0" />

                    <cmps:ImageTextItem Name="ca_LandCount"
                                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/面积16.png"
                                        Text="{Binding Summary.LandCount}"
                                        ToolTip="地块总数"
                                        MinWidth="95"
                                        VerticalAlignment="Center"
                                        Margin="8,0,0,0" />

                    <cmps:Separator Orientation="Vertical"></cmps:Separator>
                    <metro:MetroButton Name="btn_refresh"
                                       Width="30"
                                       VerticalAlignment="Stretch"
                                       Click="btn_refresh_Click">
                        <cmps:ImageTextItem Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/Refresh.png" />
                    </metro:MetroButton>
                    <cmps:Separator Orientation="Vertical"></cmps:Separator>
                    <cmps:MetroTextBox Name="txtWhere"
                                       Width="130"
                                       Height="25"
                                       Watermask="快速过滤"
                                       Margin="4,0,10,0"
                                       TextChanged="txtWhere_TextChanged" />
                    <CheckBox Content="全匹配"
                              VerticalAlignment="Center"
                              Name="cb_ComplateInfo"
                              Click="cb_ComplateInfo_Click" />
                </StackPanel>
            </Grid>
        </Border>
        <cmps:MetroTreeGrid Name="view"
                                        BorderThickness="0,0,0,0"                            
                                        cmps:DataGridAttacher.ContentBorderThickness="0,1,0,0"
                                        cmps:DataGridAttacher.ColumnHeaderThumbWidth="1"    
                                        Visibility="Visible"                                   
                                        ItemAutoExpand="True"
                                        ItemPadding="2,4"
                                        BorderBrush="LightGray"
                                        Grid.Row="1"
                                        x:FieldModifier="public"
                                        ExpandItemWhenLeftMouseDoubleClick="False"
                                        MouseDoubleClick="view_MouseDoubleClick"
                                        SelectionChanged="view_SelectionChanged"
                                        MouseRightButtonDown="view_MouseRightButtonDown">
            <cmps:MetroTreeGrid.Columns>
                <DataGridTemplateColumn Header="承包方"
                                        SortMemberPath="Name"
                                        Width="160"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <cmps:MetroTreeGridRowToggleButton></cmps:MetroTreeGridRowToggleButton>
                                <!--<cmps:VirtualizingMetroTreeViewItemToggleButton></cmps:VirtualizingMetroTreeViewItemToggleButton>-->
                                <StackPanel HorizontalAlignment="Left"
                                                Orientation="Horizontal">
                                    <cmps:ImageTextItem Image="{Binding Object.Img,Converter={StaticResource ImgConvert}}"
                                                            HorizontalAlignment="Left"
                                                            Margin="2,0,0,0"
                                                            x:Name="tbName"
                                                            Text="{Binding Object.Name}"
                                                            VerticalAlignment="Center"/>
                                </StackPanel>
                            </DockPanel>

                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Object.Tag.Status}"
                                                 Value="1">
                                    <Setter TargetName="tbName"
                                                Property="Foreground"
                                                Value="#BF2F0B" />
                                    <Setter TargetName="tbName"
                                                Property="FontWeight"
                                                Value="Bold" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Object.Tag.Status}"
                                                 Value="2">
                                    <Setter TargetName="tbName"
                                                Property="Foreground"
                                                Value="Green" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="证书编号"
                                        SortMemberPath="RegeditNumber"
                                        Width="200"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.RegeditNumber}"
                                         HorizontalAlignment="Center"      VerticalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="发包方"
                                        SortMemberPath="SenderName"
                                        Width="180"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.SenderName}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="实测总面积(亩)"
                                        SortMemberPath="CountActualArea"
                                        Width="110"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.CountActualArea}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="确权总面积(亩)"
                                        SortMemberPath="CountAwareArea"
                                        Width="110"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.CountAwareArea}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="地块总数(块)"
                                        SortMemberPath="CountLand"
                                        Width="110"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.CountLand}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="承包期限"
                                        SortMemberPath="ContractTime"
                                        Width="80"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.ContractTime}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="打印次数"
                                        SortMemberPath="CountPrint"
                                        Width="80"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.CountPrint}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="附记"
                                        SortMemberPath="ContractRegeditBookExcursus"
                                        Width="80"  cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock Text="{Binding Object.ContractRegeditBookExcursus}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Left" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </cmps:MetroTreeGrid.Columns>

            <cmps:MetroTreeGrid.ContextMenu>
                <ContextMenu FontSize="13">
                    <MenuItem Header="添加"
                              Name="miAdd"
                              Click="miAdd_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/证书16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="编辑"
                              Name="miEdit"
                              Click="miEdit_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/字段16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="删除"
                              Name="miDel"
                              Click="miDel_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/错误16_2.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator></Separator>

                    <MenuItem Header="权证登记"
                              Name="miInitialBook"
                              Click="miInitialBook_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miInitial.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="预览登记簿"
                              Name="miPreviewBook"
                              Click="miPreviewBook_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/详细信息16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="导出登记簿"
                              Name="miExportBook"
                              Click="miExportBook_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/导出word_16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Header="流水号检查" ToolTip="检查流水号规范及重复"
                              Name="miRepeatNumber"
                              Click="miRepeatNumber_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miSearch.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator></Separator>

                    <MenuItem Header="清空"
                              Name="miClear"
                              Click="miClear_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/清空16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="Uniform"
                                   Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </cmps:MetroTreeGrid.ContextMenu>
        </cmps:MetroTreeGrid>
    </Grid>
</UserControl>
