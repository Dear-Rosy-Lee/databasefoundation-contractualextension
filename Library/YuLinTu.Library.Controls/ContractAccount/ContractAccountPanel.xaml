<UserControl
    x:Class="YuLinTu.Library.Controls.ContractAccountPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cmps="clr-namespace:YuLinTu.Windows.Wpf.Metro.Components;assembly=YuLinTu.Windows.Wpf.Metro"
    xmlns:local="clr-namespace:YuLinTu.Library.Controls"
    xmlns:metro="clr-namespace:YuLinTu.Windows.Wpf.Metro;assembly=YuLinTu.Windows.Wpf.Metro">

    <UserControl.Resources>
        <local:ContractAccountImgConvert x:Key="ImgConvert" />
        <local:GenderValueConvert x:Key="GenderConvert" />
        <local:BoolConvert x:Key="boolConvert" />
        <local:ColorValueConvert x:Key="colorConvert" />
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border
            Grid.Row="0"
            Height="33"
            Padding="8,0"
            Background="{DynamicResource Metro_Window_Style_Background_Lighter}"
            BorderBrush="{DynamicResource Metro_Window_Style_BorderBrush_Default}"
            BorderThickness="0,0,0,1"
            SnapsToDevicePixels="True">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <cmps:ImageTextItem
                    Name="ca_zoneFullName"
                    Grid.Column="0"
                    Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/管理列表16.png"
                    ImageTextSpacing="8" />
                <StackPanel
                    Name="ca_LandInfo"
                    Grid.Column="1"
                    VerticalAlignment="Stretch"
                    Orientation="Horizontal">
                    <cmps:Separator Orientation="Vertical" />

                    <CheckBox
                        Name="caIsbatch"
                        Margin="8,0,8,0"
                        VerticalAlignment="Center"
                        Click="caIsbatch_Click"
                        Content="是否批量"
                        IsChecked="{Binding Path=IsBatch}" />
                    <cmps:Separator Orientation="Vertical" />

                    <cmps:ImageTextItem
                        Name="ca_family"
                        MinWidth="45"
                        Margin="12,0,0,0"
                        VerticalAlignment="Center"
                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/户主16.png"
                        Text="{Binding AccountSummary.FamilyCount}"
                        ToolTip="总户数" />

                    <cmps:ImageTextItem
                        Name="ca_landcount"
                        MinWidth="45"
                        Margin="8,0,0,0"
                        VerticalAlignment="Center"
                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/承包地16.png"
                        Text="{Binding AccountSummary.LandCount}"
                        ToolTip="总地块数" />

                    <cmps:ImageTextItem
                        Name="ca_tableArea"
                        MinWidth="65"
                        Margin="8,0,0,0"
                        VerticalAlignment="Center"
                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/详细信息16.png"
                        Text="{Binding AccountSummary.TableAreaCount}"
                        ToolTip="总二轮合同面积" />

                    <cmps:ImageTextItem
                        Name="ca_actualArea"
                        MinWidth="65"
                        Margin="8,0,0,0"
                        VerticalAlignment="Center"
                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miActualArea.png"
                        Text="{Binding AccountSummary.ActualAreaCount}"
                        ToolTip="总实测面积" />

                    <cmps:ImageTextItem
                        Name="ca_awareArea"
                        MinWidth="65"
                        Margin="8,0,12,0"
                        VerticalAlignment="Center"
                        Image="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/表16_4.png"
                        Text="{Binding AccountSummary.ArwareAreaCount}"
                        ToolTip="总确权面积" />

                    <cmps:Separator Orientation="Vertical" />

                    <metro:MetroButton
                        Name="btn_refresh"
                        Width="30"
                        VerticalAlignment="Stretch"
                        Click="btn_refresh_Click_1"
                        ToolTip="刷新">
                        <cmps:ImageTextItem Image="pack://application:,,,/YuLinTu.Resources;component/Images/16/Refresh.png" />
                    </metro:MetroButton>

                    <cmps:Separator Orientation="Vertical" />

                    <cmps:MetroTextBox
                        Name="txtWhere"
                        Width="130"
                        Height="25"
                        Margin="4,0,10,0"
                        TextChanged="txtWhere_TextChanged_1"
                        Watermask="快速过滤" />

                    <CheckBox
                        Name="ca_ComplateInfo"
                        VerticalAlignment="Center"
                        Click="ca_ComplateInfo_Click_1"
                        Content="全匹配" />
                </StackPanel>
            </Grid>
        </Border>

        <cmps:MetroTreeGrid
            Name="view"
            Grid.Row="1"
            cmps:DataGridAttacher.ColumnHeaderThumbWidth="1"
            cmps:DataGridAttacher.ContentBorderThickness="0,1,0,0"
            x:FieldModifier="public"
            AutoGenerateColumns="False"
            BorderThickness="0"
            ExpandItemWhenLeftMouseDoubleClick="False"
            ItemAutoExpand="True"
            MouseDoubleClick="view_MouseDoubleClick"
            MouseRightButtonDown="view_MouseRightButtonDown"
            PreviewMouseDown="view_PreviewMouseDown"
            SelectionChanged="view_SelectionChanged"
            VirtualizingStackPanel.IsVirtualizing="True"
            VirtualizingStackPanel.VirtualizationMode="Recycling">
            <cmps:MetroTreeGrid.Columns>
                <DataGridTemplateColumn
                    Width="250"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="地块名称"
                    SortMemberPath="Name">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <cmps:MetroTreeGridRowToggleButton />
                                <StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
                                    <cmps:ImageTextItem
                                        x:Name="tbName"
                                        Margin="2,0,0,0"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Image="{Binding Object.Img, Converter={StaticResource ImgConvert}}"
                                        Text="{Binding Object.Name, Mode=TwoWay}" />
                                </StackPanel>

                                <!--<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
                                        <Image Source="{Binding Img,Converter={StaticResource ImgConvert}}" Height="15" Width="15" HorizontalAlignment="Left" Margin="0,0,5,0" />
                                        <TextBlock x:Name="tbName" Text="{Binding Name, Mode=TwoWay}" HorizontalAlignment="Left" VerticalAlignment="Center" />
                                    </StackPanel>-->
                            </DockPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Object.Tag.Status}" Value="1">
                                    <Setter TargetName="tbName" Property="Foreground" Value="#BF2F0B" />
                                    <Setter TargetName="tbName" Property="FontWeight" Value="Bold" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Object.Tag.Status}" Value="2">
                                    <Setter TargetName="tbName" Property="Foreground" Value="Green" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn
                    Width="170"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="地块编码"
                    SortMemberPath="LandNumber">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.LandNumber}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="lb_tableArea"
                    Width="120"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="二轮合同面积(亩)"
                    SortMemberPath="TableAreaUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.TableAreaUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn
                    x:Name="lb_actualArea"
                    Width="98"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="实测面积(亩)"
                    SortMemberPath="ActualAreaUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.ActualAreaUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="yb_actualArea"
                    Width="98"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="延包面积(亩)"
                    SortMemberPath="ContractDelayAreaUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.ContractDelayAreaUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="lb_awareArea"
                    Width="98"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="确权面积(亩)"
                    SortMemberPath="AwareAreaUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.AwareAreaUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="ca_landName"
                    Width="95"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="土地利用类型"
                    SortMemberPath="LandName">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.LandName}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="ca_landCategory"
                    Width="95"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="地块类别"
                    SortMemberPath="LandCategoryUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.LandCategoryUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="gcPersonCount"
                    Width="70"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="基本农田"
                    SortMemberPath="IsFarmerLandUI">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.IsFarmerLandUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="ca_landLevel"
                    Width="80"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="地力等级"
                    SortMemberPath="LandLevelUI" Visibility="Collapsed">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.LandLevelUI}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    x:Name="colum_IsStock"
                    Width="100"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="是否确股地块"
                    SortMemberPath="LandLevelUI"
                    Visibility="Visible">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.IsStockLand, Converter={StaticResource boolConvert}}" 
                                    Foreground="{Binding Object.IsStockLand,Converter={StaticResource colorConvert}}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn
                    Width="80"
                    cmps:DataGridAttacher.ColumnHeaderHorizontalContentAlignment="Center"
                    Header="备注"
                    SortMemberPath="Comment">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Text="{Binding Object.Comment}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </cmps:MetroTreeGrid.Columns>

            <cmps:MetroTreeGrid.ContextMenu>
                <ContextMenu FontSize="13">

                    <MenuItem
                        Name="miAdd"
                        Click="miAdd_Click"
                        Header="添加">
                        <MenuItem.Icon>
                            <Image
                                Height="16"
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/承包地16.png"
                                Stretch="Uniform" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem
                        Name="miEdit"
                        Click="miEdit_Click"
                        Header="编辑">
                        <MenuItem.Icon>
                            <Image
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/字段16.png"
                                Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem
                        Name="miDel"
                        Click="miDel_Click"
                        Header="删除">
                        <MenuItem.Icon>
                            <Image
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/错误16_2.png"
                                Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />

                    <!--<MenuItem Header="地块示意图"
                              x:Name="miDouble"
                              Visibility="Visible"
                              Click="miDouble_Click">
                        <MenuItem.Icon>
                            <Image Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/人口管理16.png"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   SnapsToDevicePixels="True"
                                   Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>-->

                    <MenuItem
                        Name="miSingle"
                        Click="miSingle_Click"
                        Header="地块示意图"
                        Visibility="Visible">
                        <MenuItem.Icon>
                            <Image
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/设置户主_16.png"
                                Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem
                        Name="miCheckSpace"
                        Click="miCheckSpace_Click"
                        Header="空间查看"
                        Visibility="Visible">
                        <MenuItem.Icon>
                            <Image
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/GroupFind.png"
                                Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem
                        Name="miNumberDetail"
                        Click="miNumberDetail_Click"
                        Header="编码详情"
                        Visibility="Visible">
                        <MenuItem.Icon>
                            <Image
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/户号详情.png"
                                Stretch="None" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem
                        Name="miInitialData"
                        Click="miInitialData_Click"
                        Header="初始数据"
                        Visibility="Visible">
                        <MenuItem.Icon>
                            <Image
                                Height="16"
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miInitial.png"
                                Stretch="Uniform" />
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem Name="miSearchData" Header="检索数据">
                        <MenuItem.Icon>
                            <Image
                                Height="16"
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miSearch.png"
                                Stretch="Uniform" />
                        </MenuItem.Icon>
                        <MenuItem
                            Name="miSearchLandNameNull"
                            Click="miSearchLandNameNull_Click"
                            Header="地块名称空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miLand.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem    Name="miSearchLandCodeRepeat"
                                     Click="miSearchLandCodeRepeat_Click"
                                     Header="地块编码重复">
                            <MenuItem.Icon>
                                <Image 
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miLand.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>

                        <MenuItem
                            Name="miSearchTableAreaNull"
                            Click="miSearchTableAreaNull_Click"
                            Header="二轮合同面积空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miTableArea.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            Name="miSearchActualAreaNull"
                            Click="miSearchActualAreaNull_Click"
                            Header="实测面积空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miActualArea.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            Name="miSearchAwareAreaNull"
                            Click="miSearchAwareAreaNull_Click"
                            Header="确权面积空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miAwareArea.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            Name="miSearchIsFarmerNull"
                            Click="miSearchIsFarmerNull_Click"
                            Header="基本农田空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miFarmer.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            Name="miSearchLandLevelNull"
                            Click="miSearchLandLevelNull_Click"
                            Header="地力等级空值">
                            <MenuItem.Icon>
                                <Image
                                    Height="16"
                                    RenderOptions.BitmapScalingMode="NearestNeighbor"
                                    SnapsToDevicePixels="True"
                                    Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/miLandLevel.png"
                                    Stretch="Uniform" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <Separator />
                    <MenuItem
                        Name="miClear"
                        Click="miClear_Click"
                        Header="清空"
                        Visibility="Visible">
                        <MenuItem.Icon>
                            <Image
                                Height="16"
                                RenderOptions.BitmapScalingMode="NearestNeighbor"
                                SnapsToDevicePixels="True"
                                Source="pack://application:,,,/YuLinTu.Library.Resources;component/Resources/清空16.png"
                                Stretch="Uniform" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </cmps:MetroTreeGrid.ContextMenu>
        </cmps:MetroTreeGrid>
    </Grid>
</UserControl>